<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Generador de Datos - Caso Amazon M√©xico 2025</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #FF9900 0%, #146EB4 100%);
            min-height: 100vh;
            padding: 20px;
        }
        
        .container {
            max-width: 1200px;
            margin: 0 auto;
            background: white;
            border-radius: 20px;
            box-shadow: 0 20px 60px rgba(0,0,0,0.3);
            overflow: hidden;
        }
        
        .header {
            background: linear-gradient(135deg, #232F3E 0%, #37475A 100%);
            color: white;
            padding: 40px;
            text-align: center;
        }
        
        .header h1 {
            font-size: 32px;
            margin-bottom: 10px;
        }
        
        .amazon-logo {
            color: #FF9900;
            font-weight: bold;
            font-size: 36px;
        }
        
        .subtitle {
            font-size: 16px;
            opacity: 0.9;
            margin-top: 10px;
        }
        
        .content {
            padding: 40px;
        }
        
        .input-section {
            background: #f8f9fa;
            padding: 30px;
            border-radius: 15px;
            margin-bottom: 30px;
            border-left: 5px solid #FF9900;
        }
        
        .input-section h2 {
            color: #232F3E;
            margin-bottom: 20px;
            font-size: 24px;
        }
        
        .form-group {
            margin-bottom: 25px;
        }
        
        .form-group label {
            display: block;
            font-weight: 600;
            margin-bottom: 10px;
            color: #232F3E;
            font-size: 16px;
        }
        
        .form-group input {
            width: 100%;
            max-width: 300px;
            padding: 15px;
            border: 2px solid #ddd;
            border-radius: 8px;
            font-size: 18px;
            transition: border-color 0.3s;
            font-weight: bold;
        }
        
        .form-group input:focus {
            outline: none;
            border-color: #FF9900;
        }
        
        .btn {
            background: linear-gradient(135deg, #FF9900 0%, #FF8000 100%);
            color: white;
            border: none;
            padding: 15px 40px;
            border-radius: 8px;
            font-size: 18px;
            font-weight: 600;
            cursor: pointer;
            transition: transform 0.2s, box-shadow 0.2s;
        }
        
        .btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(255, 153, 0, 0.4);
        }
        
        .btn:active {
            transform: translateY(0);
        }
        
        .results {
            display: none;
            animation: fadeIn 0.5s;
        }
        
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }
        
        .result-card {
            background: white;
            border: 2px solid #e0e0e0;
            border-radius: 15px;
            padding: 25px;
            margin-bottom: 25px;
            box-shadow: 0 4px 12px rgba(0,0,0,0.1);
        }
        
        .result-card h3 {
            color: #FF9900;
            margin-bottom: 15px;
            font-size: 22px;
            border-bottom: 2px solid #FF9900;
            padding-bottom: 10px;
        }
        
        table {
            width: 100%;
            border-collapse: collapse;
            margin-top: 15px;
        }
        
        th, td {
            padding: 12px;
            text-align: left;
            border-bottom: 1px solid #ddd;
        }
        
        th {
            background: #232F3E;
            color: white;
            font-weight: 600;
        }
        
        tr:hover {
            background: #f8f9fa;
        }
        
        .highlight {
            background: #fff3cd;
            padding: 3px 8px;
            border-radius: 4px;
            font-weight: bold;
        }
        
        .alert {
            background: #d1ecf1;
            border-left: 4px solid #0c5460;
            padding: 15px;
            border-radius: 8px;
            margin-bottom: 20px;
        }
        
        .alert-warning {
            background: #fff3cd;
            border-left-color: #856404;
        }
        
        .alert-success {
            background: #d4edda;
            border-left-color: #155724;
        }
        
        .cost-matrix {
            overflow-x: auto;
            margin-top: 15px;
        }
        
        .cost-matrix table {
            font-size: 14px;
            min-width: 800px;
        }
        
        .cost-matrix th {
            background: #146EB4;
        }
        
        .cost-matrix td {
            text-align: center;
        }
        
        .restriction-badge {
            display: inline-block;
            padding: 8px 15px;
            background: #dc3545;
            color: white;
            border-radius: 20px;
            font-weight: bold;
            font-size: 14px;
        }
        
        .btn-download {
            background: linear-gradient(135deg, #146EB4 0%, #0c4a7a 100%);
            margin-left: 10px;
        }
        
        .summary-stats {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 20px;
            margin-top: 20px;
        }
        
        .stat-box {
            background: linear-gradient(135deg, #232F3E 0%, #37475A 100%);
            color: white;
            padding: 20px;
            border-radius: 10px;
            text-align: center;
        }
        
        .stat-box .value {
            font-size: 32px;
            font-weight: bold;
            color: #FF9900;
            margin: 10px 0;
        }
        
        .stat-box .label {
            font-size: 14px;
            opacity: 0.9;
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <div class="amazon-logo">Amazon</div>
            <h1>Generador de Datos √önicos</h1>
            <p class="subtitle">Caso: Optimizaci√≥n de Rutas M√©xico - El Buen Fin 2025</p>
        </div>
        
        <div class="content">
            <div class="input-section">
                <h2>üéì Ingresa tu Informaci√≥n</h2>
                
                <div class="alert">
                    <strong>üìå Instrucciones:</strong> Ingresa los √∫ltimos 2 d√≠gitos de tu matr√≠cula o n√∫mero de lista. 
                    Este n√∫mero generar√° tus datos √∫nicos para el caso.
                </div>
                
                <div class="form-group">
                    <label for="studentId">√öltimos 2 d√≠gitos de tu matr√≠cula (00-99):</label>
                    <input type="number" id="studentId" min="0" max="99" placeholder="Ej: 47" />
                </div>
                
                <div class="form-group">
                    <label for="studentName">Tu nombre completo (opcional):</label>
                    <input type="text" id="studentName" placeholder="Juan P√©rez Garc√≠a" />
                </div>
                
                <button class="btn" onclick="generateData()">
                    üöÄ Generar Mis Datos √önicos
                </button>
                
                <button class="btn btn-download" onclick="downloadPDF()" style="display: none;" id="downloadBtn">
                    üì• Descargar PDF
                </button>
            </div>
            
            <div id="results" class="results"></div>
        </div>
    </div>

    <script>
        let generatedData = null;

        function generateData() {
            const studentId = parseInt(document.getElementById('studentId').value);
            const studentName = document.getElementById('studentName').value || 'Estudiante';
            
            if (isNaN(studentId) || studentId < 0 || studentId > 99) {
                alert('‚ö†Ô∏è Por favor ingresa un n√∫mero v√°lido entre 00 y 99');
                return;
            }

            // Datos base
            const cities = {
                origins: [
                    { name: 'CDMX-Norte', base: 35000 },
                    { name: 'Monterrey', base: 22000 },
                    { name: 'Guadalajara', base: 20000 },
                    { name: 'Quer√©taro', base: 18000 },
                    { name: 'Puebla', base: 15000 },
                    { name: 'Tijuana', base: 12000 }
                ],
                destinations: [
                    { name: 'M√©rida', base: 12000 },
                    { name: 'Canc√∫n', base: 15000 },
                    { name: 'Toluca', base: 18000 },
                    { name: 'Le√≥n', base: 14000 },
                    { name: 'San Luis Potos√≠', base: 11000 },
                    { name: 'Veracruz', base: 13000 }
                ]
            };

            // Matriz de costos base
            const costMatrix = {
                'CDMX-Norte': { 'M√©rida': 142, 'Canc√∫n': 168, 'Toluca': 8, 'Le√≥n': 45, 'San Luis Potos√≠': 52, 'Veracruz': 48 },
                'Monterrey': { 'M√©rida': 228, 'Canc√∫n': 245, 'Toluca': 88, 'Le√≥n': 78, 'San Luis Potos√≠': 38, 'Veracruz': 115 },
                'Guadalajara': { 'M√©rida': 198, 'Canc√∫n': 215, 'Toluca': 62, 'Le√≥n': 28, 'San Luis Potos√≠': 58, 'Veracruz': 88 },
                'Quer√©taro': { 'M√©rida': 158, 'Canc√∫n': 178, 'Toluca': 18, 'Le√≥n': 22, 'San Luis Potos√≠': 35, 'Veracruz': 52 },
                'Puebla': { 'M√©rida': 128, 'Canc√∫n': 145, 'Toluca': 22, 'Le√≥n': 52, 'San Luis Potos√≠': 62, 'Veracruz': 28 },
                'Tijuana': { 'M√©rida': 485, 'Canc√∫n': 498, 'Toluca': 305, 'Le√≥n': 262, 'San Luis Potos√≠': 268, 'Veracruz': 358 }
            };

            // Calcular datos √∫nicos
            const demandFactor = 1 + (studentId % 10) / 10;
            const supplyFactor = 1 + (studentId % 7) / 10;
            const costFactor = 0.85 + (studentId % 15) / 100;

            // Calcular demandas
            const demands = cities.destinations.map(dest => ({
                name: dest.name,
                base: dest.base,
                adjusted: Math.round(dest.base * demandFactor)
            }));

            // Calcular ofertas
            const supplies = cities.origins.map(orig => ({
                name: orig.name,
                base: orig.base,
                adjusted: Math.round(orig.base * supplyFactor)
            }));

            // Calcular costos ajustados
            const adjustedCosts = {};
            for (let origin in costMatrix) {
                adjustedCosts[origin] = {};
                for (let dest in costMatrix[origin]) {
                    adjustedCosts[origin][dest] = (costMatrix[origin][dest] * costFactor).toFixed(2);
                }
            }

            // Determinar restricci√≥n especial
            const restrictions = [
                'Crisis en Monterrey: Capacidad reducida a 70% por huelga de transportistas',
                'Oportunidad en Quer√©taro: Costo desde Quer√©taro reducido 15% por ruta alterna nueva',
                'Alerta en Puebla: Carretera da√±ada, aumenta 25% costo hacia/desde Puebla',
                'Demanda urgente Canc√∫n: 30% de la demanda de Canc√∫n debe salir desde CDMX (Prime)',
                'Restricci√≥n Tijuana: Solo puede enviar a m√°ximo 3 destinos diferentes'
            ];
            const specialRestriction = restrictions[studentId % 5];

            // Calcular totales
            const totalDemand = demands.reduce((sum, d) => sum + d.adjusted, 0);
            const totalSupply = supplies.reduce((sum, s) => sum + s.adjusted, 0);
            const balance = totalSupply - totalDemand;

            // Guardar datos generados
            generatedData = {
                studentId,
                studentName,
                demandFactor,
                supplyFactor,
                costFactor,
                demands,
                supplies,
                adjustedCosts,
                specialRestriction,
                totalDemand,
                totalSupply,
                balance
            };

            // Mostrar resultados
            displayResults(generatedData);
            document.getElementById('downloadBtn').style.display = 'inline-block';
        }

        function displayResults(data) {
            const resultsDiv = document.getElementById('results');
            resultsDiv.style.display = 'block';

            let html = `
                <div class="alert alert-success">
                    <strong>‚úÖ Datos generados exitosamente para ${data.studentName}</strong><br>
                    N√∫mero ID: <span class="highlight">${String(data.studentId).padStart(2, '0')}</span>
                </div>

                <div class="summary-stats">
                    <div class="stat-box">
                        <div class="label">Total Demanda</div>
                        <div class="value">${data.totalDemand.toLocaleString()}</div>
                        <div class="label">paquetes</div>
                    </div>
                    <div class="stat-box">
                        <div class="label">Total Oferta</div>
                        <div class="value">${data.totalSupply.toLocaleString()}</div>
                        <div class="label">paquetes</div>
                    </div>
                    <div class="stat-box">
                        <div class="label">Balance</div>
                        <div class="value" style="color: ${data.balance >= 0 ? '#4CAF50' : '#FF5252'}">${data.balance.toLocaleString()}</div>
                        <div class="label">${data.balance >= 0 ? 'Excedente' : 'D√©ficit'}</div>
                    </div>
                </div>

                <div class="result-card">
                    <h3>üì¶ Tu Demanda (Destinos)</h3>
                    <p><strong>Factor aplicado:</strong> ${data.demandFactor.toFixed(2)}</p>
                    <table>
                        <thead>
                            <tr>
                                <th>Ciudad Destino</th>
                                <th>Demanda Base</th>
                                <th>Tu Demanda Ajustada</th>
                                <th>Variaci√≥n</th>
                            </tr>
                        </thead>
                        <tbody>
            `;

            data.demands.forEach(d => {
                const variation = ((d.adjusted - d.base) / d.base * 100).toFixed(1);
                html += `
                    <tr>
                        <td><strong>${d.name}</strong></td>
                        <td>${d.base.toLocaleString()}</td>
                        <td class="highlight">${d.adjusted.toLocaleString()} paquetes</td>
                        <td style="color: ${variation >= 0 ? 'green' : 'red'}">+${variation}%</td>
                    </tr>
                `;
            });

            html += `
                        </tbody>
                    </table>
                </div>

                <div class="result-card">
                    <h3>üè≠ Tu Oferta (Or√≠genes)</h3>
                    <p><strong>Factor aplicado:</strong> ${data.supplyFactor.toFixed(2)}</p>
                    <table>
                        <thead>
                            <tr>
                                <th>Centro de Distribuci√≥n</th>
                                <th>Oferta Base</th>
                                <th>Tu Oferta Ajustada</th>
                                <th>Variaci√≥n</th>
                            </tr>
                        </thead>
                        <tbody>
            `;

            data.supplies.forEach(s => {
                const variation = ((s.adjusted - s.base) / s.base * 100).toFixed(1);
                html += `
                    <tr>
                        <td><strong>${s.name}</strong></td>
                        <td>${s.base.toLocaleString()}</td>
                        <td class="highlight">${s.adjusted.toLocaleString()} paquetes</td>
                        <td style="color: ${variation >= 0 ? 'green' : 'red'}">+${variation}%</td>
                    </tr>
                `;
            });

            html += `
                        </tbody>
                    </table>
                </div>

                <div class="result-card">
                    <h3>üí∞ Tus Costos Ajustados (Miles de MXN por trailer)</h3>
                    <p><strong>Factor aplicado:</strong> ${data.costFactor.toFixed(2)}</p>
                    <div class="cost-matrix">
                        <table>
                            <thead>
                                <tr>
                                    <th>Origen / Destino</th>
            `;

            data.demands.forEach(d => {
                html += `<th>${d.name}</th>`;
            });

            html += `
                                </tr>
                            </thead>
                            <tbody>
            `;

            data.supplies.forEach(s => {
                html += `<tr><td><strong>${s.name}</strong></td>`;
                data.demands.forEach(d => {
                    html += `<td class="highlight">$${data.adjustedCosts[s.name][d.name]}</td>`;
                });
                html += `</tr>`;
            });

            html += `
                            </tbody>
                        </table>
                    </div>
                </div>

                <div class="result-card">
                    <h3>‚ö†Ô∏è Tu Restricci√≥n Especial</h3>
                    <div class="alert alert-warning">
                        <span class="restriction-badge">RESTRICCI√ìN ${data.studentId % 5}</span>
                        <p style="margin-top: 15px; font-size: 16px;"><strong>${data.specialRestriction}</strong></p>
                    </div>
                    <p style="margin-top: 15px;">
                        <strong>üí° Importante:</strong> Debes considerar esta restricci√≥n en tu modelo matem√°tico 
                        y en tu soluci√≥n final. Explicala en tu an√°lisis.
                    </p>
                </div>

                <div class="result-card">
                    <h3>üìã Checklist de Entregables</h3>
                    <ul style="list-style: none; padding: 0;">
                        <li style="padding: 10px; border-left: 3px solid #FF9900; margin-bottom: 10px;">
                            ‚úÖ Formulaci√≥n matem√°tica con ESTOS datos espec√≠ficos
                        </li>
                        <li style="padding: 10px; border-left: 3px solid #FF9900; margin-bottom: 10px;">
                            ‚úÖ Diagrama de red con nodos de oferta y demanda ajustados
                        </li>
                        <li style="padding: 10px; border-left: 3px solid #FF9900; margin-bottom: 10px;">
                            ‚úÖ Soluci√≥n computacional usando costos ajustados
                        </li>
                        <li style="padding: 10px; border-left: 3px solid #FF9900; margin-bottom: 10px;">
                            ‚úÖ Validar que balance es: ${data.balance >= 0 ? 'Factible (hay excedente)' : '‚ö†Ô∏è D√âFICIT - Analiza estrategias'}
                        </li>
                        <li style="padding: 10px; border-left: 3px solid #FF9900; margin-bottom: 10px;">
                            ‚úÖ Incorporar restricci√≥n especial #${data.studentId % 5}
                        </li>
                    </ul>
                </div>

                <div class="alert">
                    <strong>üéØ Siguiente Paso:</strong> Copia estos datos o descarga el PDF. 
                    Utiliza estos n√∫meros en tu soluci√≥n. <strong>NO uses los datos de tus compa√±eros</strong> 
                    ya que cada quien tiene valores diferentes.
                </div>
            `;

            resultsDiv.innerHTML = html;
        }

        function downloadPDF() {
            if (!generatedData) {
                alert('Primero genera tus datos');
                return;
            }

            // Crear contenido para descargar
            let content = `CASO AMAZON M√âXICO 2025 - DATOS PERSONALIZADOS\n`;
            content += `================================================\n\n`;
            content += `Estudiante: ${generatedData.studentName}\n`;
            content += `ID: ${String(generatedData.studentId).padStart(2, '0')}\n`;
            content += `Fecha: ${new Date().toLocaleDateString('es-MX')}\n\n`;
            
            content += `FACTORES APLICADOS:\n`;
            content += `- Factor de Demanda: ${generatedData.demandFactor.toFixed(2)}\n`;
            content += `- Factor de Oferta: ${generatedData.supplyFactor.toFixed(2)}\n`;
            content += `- Factor de Costo: ${generatedData.costFactor.toFixed(2)}\n\n`;
            
            content += `DEMANDAS (paquetes):\n`;
            generatedData.demands.forEach(d => {
                content += `${d.name}: ${d.adjusted.toLocaleString()}\n`;
            });
            content += `\nOFERTAS (paquetes):\n`;
            generatedData.supplies.forEach(s => {
                content += `${s.name}: ${s.adjusted.toLocaleString()}\n`;
            });
            
            content += `\nBALANCE: ${generatedData.balance.toLocaleString()} paquetes\n`;
            content += `\nRESTRICCI√ìN ESPECIAL:\n${generatedData.specialRestriction}\n\n`;
            
            content += `MATRIZ DE COSTOS (Miles MXN):\n`;
            content += `Origen -> Destino | ` + generatedData.demands.map(d => d.name).join(' | ') + '\n';
            generatedData.supplies.forEach(s => {
                content += `${s.name} | `;
                content += generatedData.demands.map(d => generatedData.adjustedCosts[s.name][d.name]).join(' | ');
                content += '\n';
            });

            // Descargar como archivo de texto
            const blob = new Blob([content], { type: 'text/plain' });
            const url = window.URL.createObjectURL(blob);
            const a = document.createElement('a');
            a.href = url;
            a.download = `Amazon_Mexico_Datos_${generatedData.studentName.replace(/\s+/g, '_')}_${String(generatedData.studentId).padStart(2, '0')}.txt`;
            document.body.appendChild(a);
            a.click();
            document.body.removeChild(a);
            window.URL.revokeObjectURL(url);
        }
    </script>
</body>
</html>
